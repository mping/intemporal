SHADOW_ENV.evalLoad("intemporal.fsm.js", true, "goog.provide(\x27intemporal.fsm\x27);\nintemporal.fsm.extract \x3d (function intemporal$fsm$extract(x,k){\nif(cljs.core.map_QMARK_(x)){\nreturn cljs.core.get.cljs$core$IFn$_invoke$arity$2(x,k);\n} else {\nif((x instanceof cljs.core.Keyword)){\nreturn x;\n} else {\nreturn null;\n}\n}\n});\n/**\n * Given a set of rules for states, a current state and event,\n * figure out the next state and potential side effects to perform.\n * \n * Transit can either be called on a *machine*, i.e: a map containing\n * the current state and rules. In this case, an updated machine map\n * will be returned, with a potentially new state and potential actions\n * to perform if any.\n * \n * When called with the three-arity version, transition rules, state,\n * and event are provided separately. The output is then a transition.\n * \n * Both arities throw when no possible transition was (found\n */\nintemporal.fsm.transit \x3d (function intemporal$fsm$transit(var_args){\nvar G__48191 \x3d arguments.length;\nswitch (G__48191) {\ncase 2:\nreturn intemporal.fsm.transit.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));\n\nbreak;\ncase 3:\nreturn intemporal.fsm.transit.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));\n\nbreak;\ndefault:\nthrow (new Error([\x22Invalid arity: \x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join(\x27\x27)));\n\n}\n});\n\n(intemporal.fsm.transit.cljs$core$IFn$_invoke$arity$2 \x3d (function (p__48194,event){\nvar map__48195 \x3d p__48194;\nvar map__48195__$1 \x3d cljs.core.__destructure_map(map__48195);\nvar machine \x3d map__48195__$1;\nvar rules \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__48195__$1,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885));\nvar state \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__48195__$1,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216));\nvar map__48199 \x3d intemporal.fsm.transit.cljs$core$IFn$_invoke$arity$3(rules,state,event);\nvar map__48199__$1 \x3d cljs.core.__destructure_map(map__48199);\nvar actions \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__48199__$1,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741));\nvar to \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__48199__$1,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634));\nvar G__48201 \x3d cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2(machine,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741)),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216),to);\nif((!((actions \x3d\x3d null)))){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__48201,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741),actions);\n} else {\nreturn G__48201;\n}\n}));\n\n(intemporal.fsm.transit.cljs$core$IFn$_invoke$arity$3 \x3d (function (rules,state,event){\nvar transitions \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(rules,intemporal.fsm.extract(state,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216)));\nvar e \x3d intemporal.fsm.extract(event,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633));\ncljs.core.println.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([state,event], 0));\n\nvar or__5025__auto__ \x3d cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (p1__48186_SHARP_,p2__48185_SHARP_){\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633).cljs$core$IFn$_invoke$arity$1(p2__48185_SHARP_),e)){\nreturn cljs.core.reduced(p2__48185_SHARP_);\n} else {\nreturn null;\n}\n}),null,transitions);\nif(cljs.core.truth_(or__5025__auto__)){\nreturn or__5025__auto__;\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(\x22cannot find transition\x22,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),new cljs.core.Keyword(\x22exoscale.ex\x22,\x22not-found\x22,\x22exoscale.ex/not-found\x22,684973639),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216),state,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),event], null));\n}\n}));\n\n(intemporal.fsm.transit.cljs$lang$maxFixedArity \x3d 3);\n\n/**\n * Returns a collection of invalid target states used in\n * \n *   Predicate to check whether a given valid ruleset provides\n * a functioning set of rules. Rules are deemed functioning if\n * all target states are known.\n */\nintemporal.fsm.invalid_states \x3d (function intemporal$fsm$invalid_states(rules){\nvar valid_states \x3d cljs.core.set(cljs.core.keys(rules));\nreturn cljs.core.not_empty(cljs.core.into.cljs$core$IFn$_invoke$arity$3(cljs.core.PersistentHashSet.EMPTY,cljs.core.comp.cljs$core$IFn$_invoke$arity$variadic(cljs.core.mapcat.cljs$core$IFn$_invoke$arity$1(cljs.core.val),cljs.core.map.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634)),cljs.core.distinct.cljs$core$IFn$_invoke$arity$0(),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.remove.cljs$core$IFn$_invoke$arity$1(cljs.core.partial.cljs$core$IFn$_invoke$arity$2(cljs.core.contains_QMARK_,valid_states))], 0)),rules));\n});\n/**\n * Perform sanity checks on a rule set, intended to be ran when loading rules.\n * Throws on badly formulated rules\n */\nintemporal.fsm.validate_rules \x3d (function intemporal$fsm$validate_rules(rules){\nif(cljs.spec.alpha.valid_QMARK_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885),rules)){\n} else {\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(cljs.spec.alpha.explain_str(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885),rules),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),new cljs.core.Keyword(\x22exoscale.ex\x22,\x22incorrect\x22,\x22exoscale.ex/incorrect\x22,-1592182378)], null));\n}\n\nvar temp__5825__auto___48496 \x3d intemporal.fsm.invalid_states(rules);\nif(cljs.core.truth_(temp__5825__auto___48496)){\nvar states_48497 \x3d temp__5825__auto___48496;\nthrow cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2(cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core.str,\x22transitions contain invalid states: \x22,cljs.core.interpose.cljs$core$IFn$_invoke$arity$2(\x22, \x22,cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.name,states_48497))),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),new cljs.core.Keyword(\x22exoscale.ex\x22,\x22incorrect\x22,\x22exoscale.ex/incorrect\x22,-1592182378),new cljs.core.Keyword(null,\x22states\x22,\x22states\x22,1389013542),states_48497], null));\n} else {\n}\n\nreturn rules;\n});\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216),new cljs.core.Symbol(\x22cljs.core\x22,\x22qualified-keyword?\x22,\x22cljs.core/qualified-keyword?\x22,-308091478,null),cljs.core.qualified_keyword_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22action\x22,\x22intemporal.fsm/action\x22,749777745),new cljs.core.Symbol(\x22cljs.core\x22,\x22qualified-keyword?\x22,\x22cljs.core/qualified-keyword?\x22,-308091478,null),cljs.core.qualified_keyword_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Symbol(\x22cljs.core\x22,\x22qualified-keyword?\x22,\x22cljs.core/qualified-keyword?\x22,-308091478,null),cljs.core.qualified_keyword_QMARK_);\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741),cljs.core.list(new cljs.core.Symbol(\x22cljs.spec.alpha\x22,\x22coll-of\x22,\x22cljs.spec.alpha/coll-of\x22,1019430407,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22action\x22,\x22intemporal.fsm/action\x22,749777745)),cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22action\x22,\x22intemporal.fsm/action\x22,749777745),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22action\x22,\x22intemporal.fsm/action\x22,749777745),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22conform-all\x22,\x22cljs.spec.alpha/conform-all\x22,45201917),true,new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22kind-form\x22,\x22cljs.spec.alpha/kind-form\x22,-1047104697),null,new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22describe\x22,\x22cljs.spec.alpha/describe\x22,1883026911),cljs.core.list(new cljs.core.Symbol(\x22cljs.spec.alpha\x22,\x22coll-of\x22,\x22cljs.spec.alpha/coll-of\x22,1019430407,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22action\x22,\x22intemporal.fsm/action\x22,749777745)),new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22cpred\x22,\x22cljs.spec.alpha/cpred\x22,-693471218),(function (G__48221){\nreturn cljs.core.coll_QMARK_(G__48221);\n})], null),null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transition\x22,\x22intemporal.fsm/transition\x22,-1631683072),cljs.core.list(new cljs.core.Symbol(\x22cljs.spec.alpha\x22,\x22keys\x22,\x22cljs.spec.alpha/keys\x22,1109346032,null),new cljs.core.Keyword(null,\x22req\x22,\x22req\x22,-326448303),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634)], null),new cljs.core.Keyword(null,\x22opt\x22,\x22opt\x22,-794706369),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741)], null)),cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\x22req-un\x22,\x22req-un\x22,1074571008),new cljs.core.Keyword(null,\x22opt-un\x22,\x22opt-un\x22,883442496),new cljs.core.Keyword(null,\x22gfn\x22,\x22gfn\x22,791517474),new cljs.core.Keyword(null,\x22pred-exprs\x22,\x22pred-exprs\x22,1792271395),new cljs.core.Keyword(null,\x22keys-pred\x22,\x22keys-pred\x22,858984739),new cljs.core.Keyword(null,\x22opt-keys\x22,\x22opt-keys\x22,1262688261),new cljs.core.Keyword(null,\x22req-specs\x22,\x22req-specs\x22,553962313),new cljs.core.Keyword(null,\x22req\x22,\x22req\x22,-326448303),new cljs.core.Keyword(null,\x22req-keys\x22,\x22req-keys\x22,514319221),new cljs.core.Keyword(null,\x22opt-specs\x22,\x22opt-specs\x22,-384905450),new cljs.core.Keyword(null,\x22pred-forms\x22,\x22pred-forms\x22,172611832),new cljs.core.Keyword(null,\x22opt\x22,\x22opt\x22,-794706369)],[null,null,null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__48238){\nreturn cljs.core.map_QMARK_(G__48238);\n}),(function (G__48238){\nreturn cljs.core.contains_QMARK_(G__48238,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633));\n}),(function (G__48238){\nreturn cljs.core.contains_QMARK_(G__48238,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634));\n})], null),(function (G__48238){\nreturn ((cljs.core.map_QMARK_(G__48238)) \x26\x26 (((cljs.core.contains_QMARK_(G__48238,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633))) \x26\x26 (cljs.core.contains_QMARK_(G__48238,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634))))));\n}),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22fn\x22,\x22cljs.core/fn\x22,-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22map?\x22,\x22cljs.core/map?\x22,-1390345523,null),new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null))),cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22fn\x22,\x22cljs.core/fn\x22,-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22contains?\x22,\x22cljs.core/contains?\x22,-976526835,null),new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633))),cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22fn\x22,\x22cljs.core/fn\x22,-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22contains?\x22,\x22cljs.core/contains?\x22,-976526835,null),new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634)))], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741)], null)])));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transitions\x22,\x22intemporal.fsm/transitions\x22,83111518),cljs.core.list(new cljs.core.Symbol(\x22cljs.spec.alpha\x22,\x22coll-of\x22,\x22cljs.spec.alpha/coll-of\x22,1019430407,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transition\x22,\x22intemporal.fsm/transition\x22,-1631683072)),cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transition\x22,\x22intemporal.fsm/transition\x22,-1631683072),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transition\x22,\x22intemporal.fsm/transition\x22,-1631683072),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22conform-all\x22,\x22cljs.spec.alpha/conform-all\x22,45201917),true,new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22kind-form\x22,\x22cljs.spec.alpha/kind-form\x22,-1047104697),null,new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22describe\x22,\x22cljs.spec.alpha/describe\x22,1883026911),cljs.core.list(new cljs.core.Symbol(\x22cljs.spec.alpha\x22,\x22coll-of\x22,\x22cljs.spec.alpha/coll-of\x22,1019430407,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transition\x22,\x22intemporal.fsm/transition\x22,-1631683072)),new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22cpred\x22,\x22cljs.spec.alpha/cpred\x22,-693471218),(function (G__48282){\nreturn cljs.core.coll_QMARK_(G__48282);\n})], null),null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885),cljs.core.list(new cljs.core.Symbol(\x22cljs.spec.alpha\x22,\x22map-of\x22,\x22cljs.spec.alpha/map-of\x22,153715093,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transitions\x22,\x22intemporal.fsm/transitions\x22,83111518)),cljs.spec.alpha.every_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol(\x22cljs.spec.alpha\x22,\x22tuple\x22,\x22cljs.spec.alpha/tuple\x22,-415901908,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transitions\x22,\x22intemporal.fsm/transitions\x22,83111518)),cljs.spec.alpha.tuple_impl.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transitions\x22,\x22intemporal.fsm/transitions\x22,83111518)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transitions\x22,\x22intemporal.fsm/transitions\x22,83111518)], null)),new cljs.core.PersistentArrayMap(null, 7, [new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22kfn\x22,\x22cljs.spec.alpha/kfn\x22,672643897),(function (i__13429__auto__,v__13430__auto__){\nreturn cljs.core.nth.cljs$core$IFn$_invoke$arity$2(v__13430__auto__,(0));\n}),new cljs.core.Keyword(null,\x22into\x22,\x22into\x22,-150836029),cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22conform-all\x22,\x22cljs.spec.alpha/conform-all\x22,45201917),true,new cljs.core.Keyword(null,\x22kind\x22,\x22kind\x22,-717265803),cljs.core.map_QMARK_,new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22kind-form\x22,\x22cljs.spec.alpha/kind-form\x22,-1047104697),new cljs.core.Symbol(\x22cljs.core\x22,\x22map?\x22,\x22cljs.core/map?\x22,-1390345523,null),new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22describe\x22,\x22cljs.spec.alpha/describe\x22,1883026911),cljs.core.list(new cljs.core.Symbol(\x22cljs.spec.alpha\x22,\x22map-of\x22,\x22cljs.spec.alpha/map-of\x22,153715093,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22transitions\x22,\x22intemporal.fsm/transitions\x22,83111518)),new cljs.core.Keyword(\x22cljs.spec.alpha\x22,\x22cpred\x22,\x22cljs.spec.alpha/cpred\x22,-693471218),(function (G__48299){\nreturn cljs.core.map_QMARK_(G__48299);\n})], null),null));\ncljs.spec.alpha.def_impl(new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22machine\x22,\x22intemporal.fsm/machine\x22,774176589),cljs.core.list(new cljs.core.Symbol(\x22cljs.spec.alpha\x22,\x22keys\x22,\x22cljs.spec.alpha/keys\x22,1109346032,null),new cljs.core.Keyword(null,\x22req\x22,\x22req\x22,-326448303),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216)], null),new cljs.core.Keyword(null,\x22opt\x22,\x22opt\x22,-794706369),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741)], null)),cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\x22req-un\x22,\x22req-un\x22,1074571008),new cljs.core.Keyword(null,\x22opt-un\x22,\x22opt-un\x22,883442496),new cljs.core.Keyword(null,\x22gfn\x22,\x22gfn\x22,791517474),new cljs.core.Keyword(null,\x22pred-exprs\x22,\x22pred-exprs\x22,1792271395),new cljs.core.Keyword(null,\x22keys-pred\x22,\x22keys-pred\x22,858984739),new cljs.core.Keyword(null,\x22opt-keys\x22,\x22opt-keys\x22,1262688261),new cljs.core.Keyword(null,\x22req-specs\x22,\x22req-specs\x22,553962313),new cljs.core.Keyword(null,\x22req\x22,\x22req\x22,-326448303),new cljs.core.Keyword(null,\x22req-keys\x22,\x22req-keys\x22,514319221),new cljs.core.Keyword(null,\x22opt-specs\x22,\x22opt-specs\x22,-384905450),new cljs.core.Keyword(null,\x22pred-forms\x22,\x22pred-forms\x22,172611832),new cljs.core.Keyword(null,\x22opt\x22,\x22opt\x22,-794706369)],[null,null,null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__48318){\nreturn cljs.core.map_QMARK_(G__48318);\n}),(function (G__48318){\nreturn cljs.core.contains_QMARK_(G__48318,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885));\n}),(function (G__48318){\nreturn cljs.core.contains_QMARK_(G__48318,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216));\n})], null),(function (G__48318){\nreturn ((cljs.core.map_QMARK_(G__48318)) \x26\x26 (((cljs.core.contains_QMARK_(G__48318,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885))) \x26\x26 (cljs.core.contains_QMARK_(G__48318,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216))))));\n}),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22fn\x22,\x22cljs.core/fn\x22,-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22map?\x22,\x22cljs.core/map?\x22,-1390345523,null),new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null))),cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22fn\x22,\x22cljs.core/fn\x22,-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22contains?\x22,\x22cljs.core/contains?\x22,-976526835,null),new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885))),cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22fn\x22,\x22cljs.core/fn\x22,-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null)], null),cljs.core.list(new cljs.core.Symbol(\x22cljs.core\x22,\x22contains?\x22,\x22cljs.core/contains?\x22,-976526835,null),new cljs.core.Symbol(null,\x22%\x22,\x22%\x22,-950237169,null),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216)))], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741)], null)])));\n/**\n * A helper to define a ruleset\n */\nintemporal.fsm.ruleset \x3d (function intemporal$fsm$ruleset(var_args){\nvar args__5755__auto__ \x3d [];\nvar len__5749__auto___48509 \x3d arguments.length;\nvar i__5750__auto___48510 \x3d (0);\nwhile(true){\nif((i__5750__auto___48510 \x3c len__5749__auto___48509)){\nargs__5755__auto__.push((arguments[i__5750__auto___48510]));\n\nvar G__48512 \x3d (i__5750__auto___48510 + (1));\ni__5750__auto___48510 \x3d G__48512;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__5756__auto__ \x3d ((((0) \x3c args__5755__auto__.length))?(new cljs.core.IndexedSeq(args__5755__auto__.slice((0)),(0),null)):null);\nreturn intemporal.fsm.ruleset.cljs$core$IFn$_invoke$arity$variadic(argseq__5756__auto__);\n});\n\n(intemporal.fsm.ruleset.cljs$core$IFn$_invoke$arity$variadic \x3d (function (rules){\nreturn cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentArrayMap.EMPTY,rules);\n}));\n\n(intemporal.fsm.ruleset.cljs$lang$maxFixedArity \x3d (0));\n\n/** @this {Function} */\n(intemporal.fsm.ruleset.cljs$lang$applyTo \x3d (function (seq48411){\nvar self__5735__auto__ \x3d this;\nreturn self__5735__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq48411));\n}));\n\n/**\n * Within the context of a ruleset definition, define transitions from\n *   a particular state\n */\nintemporal.fsm.with_state \x3d (function intemporal$fsm$with_state(var_args){\nvar args__5755__auto__ \x3d [];\nvar len__5749__auto___48517 \x3d arguments.length;\nvar i__5750__auto___48518 \x3d (0);\nwhile(true){\nif((i__5750__auto___48518 \x3c len__5749__auto___48517)){\nargs__5755__auto__.push((arguments[i__5750__auto___48518]));\n\nvar G__48520 \x3d (i__5750__auto___48518 + (1));\ni__5750__auto___48518 \x3d G__48520;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__5756__auto__ \x3d ((((1) \x3c args__5755__auto__.length))?(new cljs.core.IndexedSeq(args__5755__auto__.slice((1)),(0),null)):null);\nreturn intemporal.fsm.with_state.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),argseq__5756__auto__);\n});\n\n(intemporal.fsm.with_state.cljs$core$IFn$_invoke$arity$variadic \x3d (function (state,transitions){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [state,transitions], null);\n}));\n\n(intemporal.fsm.with_state.cljs$lang$maxFixedArity \x3d (1));\n\n/** @this {Function} */\n(intemporal.fsm.with_state.cljs$lang$applyTo \x3d (function (seq48414){\nvar G__48415 \x3d cljs.core.first(seq48414);\nvar seq48414__$1 \x3d cljs.core.next(seq48414);\nvar self__5734__auto__ \x3d this;\nreturn self__5734__auto__.cljs$core$IFn$_invoke$arity$variadic(G__48415,seq48414__$1);\n}));\n\n/**\n * Within the context of a state transition definition, add an event\n *   transition definition.\n */\nintemporal.fsm.upon \x3d (function intemporal$fsm$upon(var_args){\nvar args__5755__auto__ \x3d [];\nvar len__5749__auto___48526 \x3d arguments.length;\nvar i__5750__auto___48527 \x3d (0);\nwhile(true){\nif((i__5750__auto___48527 \x3c len__5749__auto___48526)){\nargs__5755__auto__.push((arguments[i__5750__auto___48527]));\n\nvar G__48529 \x3d (i__5750__auto___48527 + (1));\ni__5750__auto___48527 \x3d G__48529;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__5756__auto__ \x3d ((((2) \x3c args__5755__auto__.length))?(new cljs.core.IndexedSeq(args__5755__auto__.slice((2)),(0),null)):null);\nreturn intemporal.fsm.upon.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),(arguments[(1)]),argseq__5756__auto__);\n});\n\n(intemporal.fsm.upon.cljs$core$IFn$_invoke$arity$variadic \x3d (function (event,new_state,p__48439){\nvar vec__48441 \x3d p__48439;\nvar actions \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__48441,(0),null);\nreturn new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),event,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new_state,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741),actions], null);\n}));\n\n(intemporal.fsm.upon.cljs$lang$maxFixedArity \x3d (2));\n\n/** @this {Function} */\n(intemporal.fsm.upon.cljs$lang$applyTo \x3d (function (seq48429){\nvar G__48430 \x3d cljs.core.first(seq48429);\nvar seq48429__$1 \x3d cljs.core.next(seq48429);\nvar G__48431 \x3d cljs.core.first(seq48429__$1);\nvar seq48429__$2 \x3d cljs.core.next(seq48429__$1);\nvar self__5734__auto__ \x3d this;\nreturn self__5734__auto__.cljs$core$IFn$_invoke$arity$variadic(G__48430,G__48431,seq48429__$2);\n}));\n\n/**\n * Define the target state for a state transition\n */\nintemporal.fsm.transit_to \x3d (function intemporal$fsm$transit_to(x){\nreturn x;\n});\n/**\n * Define effects for a state transition\n */\nintemporal.fsm.and_execute \x3d (function intemporal$fsm$and_execute(var_args){\nvar args__5755__auto__ \x3d [];\nvar len__5749__auto___48531 \x3d arguments.length;\nvar i__5750__auto___48532 \x3d (0);\nwhile(true){\nif((i__5750__auto___48532 \x3c len__5749__auto___48531)){\nargs__5755__auto__.push((arguments[i__5750__auto___48532]));\n\nvar G__48533 \x3d (i__5750__auto___48532 + (1));\ni__5750__auto___48532 \x3d G__48533;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__5756__auto__ \x3d ((((0) \x3c args__5755__auto__.length))?(new cljs.core.IndexedSeq(args__5755__auto__.slice((0)),(0),null)):null);\nreturn intemporal.fsm.and_execute.cljs$core$IFn$_invoke$arity$variadic(argseq__5756__auto__);\n});\n\n(intemporal.fsm.and_execute.cljs$core$IFn$_invoke$arity$variadic \x3d (function (effects){\nreturn cljs.core.into.cljs$core$IFn$_invoke$arity$2(cljs.core.PersistentVector.EMPTY,effects);\n}));\n\n(intemporal.fsm.and_execute.cljs$lang$maxFixedArity \x3d (0));\n\n/** @this {Function} */\n(intemporal.fsm.and_execute.cljs$lang$applyTo \x3d (function (seq48461){\nvar self__5735__auto__ \x3d this;\nreturn self__5735__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq48461));\n}));\n\n/**\n * Yields the next state for a transition\n */\nintemporal.fsm.nxt \x3d new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634);\n/**\n * Yields all actions for a transition\n */\nintemporal.fsm.actions \x3d new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741);\n/**\n * Yields the first action for a transition\n */\nintemporal.fsm.action \x3d cljs.core.comp.cljs$core$IFn$_invoke$arity$2(cljs.core.first,intemporal.fsm.actions);\n");
SHADOW_ENV.evalLoad("intemporal.automata.js", true, "goog.provide(\x27intemporal.automata\x27);\nintemporal.automata.resource_rules \x3d new cljs.core.PersistentArrayMap(null, 8, [new cljs.core.Keyword(\x22state\x22,\x22init\x22,\x22state/init\x22,-2036161781),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22create\x22,\x22event/create\x22,-1323031250),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22creating\x22,\x22state/creating\x22,-518318091),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22action\x22,\x22create\x22,\x22action/create\x22,1832728658)], null)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22kill\x22,\x22event/kill\x22,167622871),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22killed\x22,\x22state/killed\x22,860727406)], null)], null),new cljs.core.Keyword(\x22state\x22,\x22creating\x22,\x22state/creating\x22,-518318091),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22created\x22,\x22event/created\x22,-814408574),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22down\x22,\x22state/down\x22,1337490481)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22error\x22,\x22event/error\x22,-1159804082),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22init\x22,\x22state/init\x22,-2036161781)], null)], null),new cljs.core.Keyword(\x22state\x22,\x22down\x22,\x22state/down\x22,1337490481),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22start\x22,\x22event/start\x22,-811699307),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22starting\x22,\x22state/starting\x22,674059467),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22action\x22,\x22start\x22,\x22action/start\x22,906325809)], null)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22kill\x22,\x22event/kill\x22,167622871),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22killing\x22,\x22state/killing\x22,600859092),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22action\x22,\x22kill\x22,\x22action/kill\x22,1956070515)], null)], null)], null),new cljs.core.Keyword(\x22state\x22,\x22starting\x22,\x22state/starting\x22,674059467),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22started\x22,\x22event/started\x22,531610038),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22up\x22,\x22state/up\x22,-110768032)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22error\x22,\x22event/error\x22,-1159804082),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22down\x22,\x22state/down\x22,1337490481)], null)], null),new cljs.core.Keyword(\x22state\x22,\x22stopping\x22,\x22state/stopping\x22,859893266),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22stopped\x22,\x22event/stopped\x22,-1603032798),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22down\x22,\x22state/down\x22,1337490481)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22error\x22,\x22event/error\x22,-1159804082),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22up\x22,\x22state/up\x22,-110768032)], null)], null),new cljs.core.Keyword(\x22state\x22,\x22up\x22,\x22state/up\x22,-110768032),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22stop\x22,\x22event/stop\x22,-2027762516),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22stopping\x22,\x22state/stopping\x22,859893266),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22action\x22,\x22stop\x22,\x22action/stop\x22,1397999688)], null)], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22kill\x22,\x22event/kill\x22,167622871),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22killing\x22,\x22state/killing\x22,600859092),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22actions\x22,\x22intemporal.fsm/actions\x22,1353370741),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(\x22action\x22,\x22kill\x22,\x22action/kill\x22,1956070515)], null)], null)], null),new cljs.core.Keyword(\x22state\x22,\x22killing\x22,\x22state/killing\x22,600859092),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22killed\x22,\x22event/killed\x22,874658407),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22killed\x22,\x22state/killed\x22,860727406)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22event\x22,\x22intemporal.fsm/event\x22,-1861445633),new cljs.core.Keyword(\x22event\x22,\x22error\x22,\x22event/error\x22,-1159804082),new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22to\x22,\x22intemporal.fsm/to\x22,-1962402634),new cljs.core.Keyword(\x22state\x22,\x22killing\x22,\x22state/killing\x22,600859092)], null)], null),new cljs.core.Keyword(\x22state\x22,\x22killed\x22,\x22state/killed\x22,860727406),cljs.core.PersistentVector.EMPTY], null);\nintemporal.automata.process_event \x3d (function intemporal$automata$process_event(event){\nconsole.log(\x22Going to process event\x22,event);\n\nvar nxt \x3d (function (){var pred__57302 \x3d cljs.core._EQ_;\nvar expr__57303 \x3d event;\nif(cljs.core.truth_((pred__57302.cljs$core$IFn$_invoke$arity$2 ? pred__57302.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\x22event\x22,\x22create\x22,\x22event/create\x22,-1323031250),expr__57303) : pred__57302.call(null,new cljs.core.Keyword(\x22event\x22,\x22create\x22,\x22event/create\x22,-1323031250),expr__57303)))){\nreturn new cljs.core.Keyword(\x22event\x22,\x22created\x22,\x22event/created\x22,-814408574);\n} else {\nif(cljs.core.truth_((pred__57302.cljs$core$IFn$_invoke$arity$2 ? pred__57302.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\x22event\x22,\x22created\x22,\x22event/created\x22,-814408574),expr__57303) : pred__57302.call(null,new cljs.core.Keyword(\x22event\x22,\x22created\x22,\x22event/created\x22,-814408574),expr__57303)))){\nreturn new cljs.core.Keyword(\x22event\x22,\x22start\x22,\x22event/start\x22,-811699307);\n} else {\nif(cljs.core.truth_((pred__57302.cljs$core$IFn$_invoke$arity$2 ? pred__57302.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\x22event\x22,\x22start\x22,\x22event/start\x22,-811699307),expr__57303) : pred__57302.call(null,new cljs.core.Keyword(\x22event\x22,\x22start\x22,\x22event/start\x22,-811699307),expr__57303)))){\nreturn new cljs.core.Keyword(\x22event\x22,\x22started\x22,\x22event/started\x22,531610038);\n} else {\nif(cljs.core.truth_((pred__57302.cljs$core$IFn$_invoke$arity$2 ? pred__57302.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\x22event\x22,\x22started\x22,\x22event/started\x22,531610038),expr__57303) : pred__57302.call(null,new cljs.core.Keyword(\x22event\x22,\x22started\x22,\x22event/started\x22,531610038),expr__57303)))){\nreturn new cljs.core.Keyword(\x22event\x22,\x22stop\x22,\x22event/stop\x22,-2027762516);\n} else {\nif(cljs.core.truth_((pred__57302.cljs$core$IFn$_invoke$arity$2 ? pred__57302.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\x22event\x22,\x22stop\x22,\x22event/stop\x22,-2027762516),expr__57303) : pred__57302.call(null,new cljs.core.Keyword(\x22event\x22,\x22stop\x22,\x22event/stop\x22,-2027762516),expr__57303)))){\nreturn new cljs.core.Keyword(\x22event\x22,\x22stopped\x22,\x22event/stopped\x22,-1603032798);\n} else {\nif(cljs.core.truth_((pred__57302.cljs$core$IFn$_invoke$arity$2 ? pred__57302.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\x22event\x22,\x22stopped\x22,\x22event/stopped\x22,-1603032798),expr__57303) : pred__57302.call(null,new cljs.core.Keyword(\x22event\x22,\x22stopped\x22,\x22event/stopped\x22,-1603032798),expr__57303)))){\nreturn new cljs.core.Keyword(\x22event\x22,\x22kill\x22,\x22event/kill\x22,167622871);\n} else {\nif(cljs.core.truth_((pred__57302.cljs$core$IFn$_invoke$arity$2 ? pred__57302.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(\x22event\x22,\x22kill\x22,\x22event/kill\x22,167622871),expr__57303) : pred__57302.call(null,new cljs.core.Keyword(\x22event\x22,\x22kill\x22,\x22event/kill\x22,167622871),expr__57303)))){\nreturn new cljs.core.Keyword(\x22event\x22,\x22killed\x22,\x22event/killed\x22,874658407);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n})();\nreturn nxt;\n});\nintemporal.automata.run_fsm_workflow_ \x3d (function intemporal$automata$run_fsm_workflow_(rules,init_state,init_event){\nvar stub \x3d (function() { \nvar G__57380__delegate \x3d function (argv__56956__auto__){\nif((!((new cljs.core.Keyword(null,\x22next-id\x22,\x22next-id\x22,-224240762).cljs$core$IFn$_invoke$arity$1(intemporal.workflow.internal._STAR_env_STAR_) \x3d\x3d null)))){\n} else {\nthrow (new Error([\x22Assert failed: \x22,\x22No next-id function, are you inside `defn-workflow`?\x22,\x22\\n\x22,\x22(clojure.core/some? (:next-id intemporal.workflow.internal/*env*))\x22].join(\x27\x27)));\n}\n\nvar ref__56957__auto__ \x3d new cljs.core.Keyword(null,\x22ref\x22,\x22ref\x22,1289896967).cljs$core$IFn$_invoke$arity$1(intemporal.workflow.internal._STAR_env_STAR_);\nvar root__56958__auto__ \x3d new cljs.core.Keyword(null,\x22root\x22,\x22root\x22,-448657453).cljs$core$IFn$_invoke$arity$1(intemporal.workflow.internal._STAR_env_STAR_);\nvar fvar__56959__auto__ \x3d new cljs.core.Var(function(){return intemporal.automata.process_event;},new cljs.core.Symbol(\x22intemporal.automata\x22,\x22process-event\x22,\x22intemporal.automata/process-event\x22,-1645671854,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\x22ns\x22,\x22ns\x22,441598760),new cljs.core.Keyword(null,\x22name\x22,\x22name\x22,1843675177),new cljs.core.Keyword(null,\x22file\x22,\x22file\x22,-1269645878),new cljs.core.Keyword(null,\x22end-column\x22,\x22end-column\x22,1425389514),new cljs.core.Keyword(null,\x22column\x22,\x22column\x22,2078222095),new cljs.core.Keyword(null,\x22line\x22,\x22line\x22,212345235),new cljs.core.Keyword(null,\x22end-line\x22,\x22end-line\x22,1837326455),new cljs.core.Keyword(null,\x22arglists\x22,\x22arglists\x22,1661989754),new cljs.core.Keyword(null,\x22doc\x22,\x22doc\x22,1913296891),new cljs.core.Keyword(null,\x22test\x22,\x22test\x22,577538877)],[new cljs.core.Symbol(null,\x22intemporal.automata\x22,\x22intemporal.automata\x22,1148200861,null),new cljs.core.Symbol(null,\x22process-event\x22,\x22process-event\x22,-641768871,null),\x22intemporal/automata.cljs\x22,20,1,30,30,cljs.core.list(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22event\x22,\x22event\x22,1941966969,null)], null)),null,(cljs.core.truth_(intemporal.automata.process_event)?intemporal.automata.process_event.cljs$lang$test:null)]));\nvar store__56960__auto__ \x3d new cljs.core.Keyword(null,\x22store\x22,\x22store\x22,1512230022).cljs$core$IFn$_invoke$arity$1(intemporal.workflow.internal._STAR_env_STAR_);\nvar protos__56961__auto__ \x3d new cljs.core.Keyword(null,\x22protos\x22,\x22protos\x22,-804831293).cljs$core$IFn$_invoke$arity$1(intemporal.workflow.internal._STAR_env_STAR_);\nvar id__56962__auto__ \x3d (function (){var fexpr__57316 \x3d new cljs.core.Keyword(null,\x22next-id\x22,\x22next-id\x22,-224240762).cljs$core$IFn$_invoke$arity$1(intemporal.workflow.internal._STAR_env_STAR_);\nreturn (fexpr__57316.cljs$core$IFn$_invoke$arity$0 ? fexpr__57316.cljs$core$IFn$_invoke$arity$0() : fexpr__57316.call(null));\n})();\nvar ref__56957__auto____$1 \x3d null;\nvar task__56963__auto__ \x3d intemporal.workflow.internal.create_activity_task.cljs$core$IFn$_invoke$arity$6(ref__56957__auto____$1,root__56958__auto__,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(fvar__56959__auto__),fvar__56959__auto__,argv__56956__auto__,id__56962__auto__);\n(function (){\nvar __run_fn_form \x3d null;\nvar __kind \x3d new cljs.core.Keyword(null,\x22log\x22,\x22log\x22,-1595516004);\nvar __ns \x3d \x22intemporal.automata\x22;\nvar __id \x3d null;\nvar __level \x3d new cljs.core.Keyword(null,\x22debug\x22,\x22debug\x22,-1608172596);\nif(cljs.core.truth_((function (){var sf \x3d taoensso.telemere.impl._STAR_rt_call_filter_STAR_;\nif(cljs.core.truth_(sf)){\nreturn (sf.cljs$core$IFn$_invoke$arity$4 ? sf.cljs$core$IFn$_invoke$arity$4(new cljs.core.Keyword(null,\x22log\x22,\x22log\x22,-1595516004),__ns,__id,__level) : sf.call(null,new cljs.core.Keyword(null,\x22log\x22,\x22log\x22,-1595516004),__ns,__id,__level));\n} else {\nreturn true;\n}\n})())){\nvar __inst \x3d (new Date());\nvar __thread \x3d null;\nvar __root0 \x3d taoensso.telemere.impl._STAR_trace_root_STAR_;\nvar __otel_context1 \x3d null;\nvar __uid \x3d null;\nvar __root1 \x3d __root0;\nvar __run_result \x3d null;\nvar signal__52369__auto__ \x3d (new cljs.core.Delay((function (){\n\nvar signal__52360__auto__ \x3d (function (){var signal__52359__auto__ \x3d (new taoensso.telemere.impl.Signal((1),__inst,__uid,__ns,null,null,__kind,__id,__level,taoensso.telemere._STAR_ctx_STAR_,taoensso.telemere.impl._STAR_trace_parent_STAR_,__root1,null,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22_data\x22,\x22_data\x22,-1394265439),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22task\x22,\x22task\x22,-1476607993),task__56963__auto__,new cljs.core.Keyword(null,\x22env\x22,\x22env\x22,-1815813235),intemporal.workflow.internal._STAR_env_STAR_], null)], null),(new cljs.core.Delay((function (){\nreturn taoensso.telemere.impl.signal_msg(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [\x22Invoking task with id \x22,id__56962__auto__], null));\n}),null)),null,null,null,null,null,null,null,null));\nreturn cljs.core.reduce_kv(cljs.core.assoc,signal__52359__auto__,signal__52359__auto__.kvs);\n})();\nvar temp__5823__auto__ \x3d taoensso.telemere._STAR_xfn_STAR_;\nif(cljs.core.truth_(temp__5823__auto__)){\nvar xfn__52361__auto__ \x3d temp__5823__auto__;\nreturn (xfn__52361__auto__.cljs$core$IFn$_invoke$arity$1 ? xfn__52361__auto__.cljs$core$IFn$_invoke$arity$1(signal__52360__auto__) : xfn__52361__auto__.call(null,signal__52360__auto__));\n} else {\nreturn signal__52360__auto__;\n}\n}),null));\ntaoensso.telemere.impl.dispatch_signal_BANG_((new taoensso.telemere.impl.WrappedSignal(__kind,__ns,__id,__level,signal__52369__auto__)));\n\nif(cljs.core.truth_(__run_result)){\nreturn (__run_result.cljs$core$IFn$_invoke$arity$1 ? __run_result.cljs$core$IFn$_invoke$arity$1(signal__52369__auto__) : __run_result.call(null,signal__52369__auto__));\n} else {\nreturn true;\n}\n} else {\nreturn null;\n}\n})();\n\n\nvar res__56964__auto__ \x3d intemporal.workflow.internal.resume_task.cljs$core$IFn$_invoke$arity$4(intemporal.workflow.internal._STAR_env_STAR_,store__56960__auto__,protos__56961__auto__,task__56963__auto__);\nreturn res__56964__auto__;\n};\nvar G__57380 \x3d function (var_args){\nvar argv__56956__auto__ \x3d null;\nif (arguments.length \x3e 0) {\nvar G__57382__i \x3d 0, G__57382__a \x3d new Array(arguments.length -  0);\nwhile (G__57382__i \x3c G__57382__a.length) {G__57382__a[G__57382__i] \x3d arguments[G__57382__i + 0]; ++G__57382__i;}\n  argv__56956__auto__ \x3d new cljs.core.IndexedSeq(G__57382__a,0,null);\n} \nreturn G__57380__delegate.call(this,argv__56956__auto__);};\nG__57380.cljs$lang$maxFixedArity \x3d 0;\nG__57380.cljs$lang$applyTo \x3d (function (arglist__57384){\nvar argv__56956__auto__ \x3d cljs.core.seq(arglist__57384);\nreturn G__57380__delegate(argv__56956__auto__);\n});\nG__57380.cljs$core$IFn$_invoke$arity$variadic \x3d G__57380__delegate;\nreturn G__57380;\n})()\n;\nvar initstate \x3d new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22rules\x22,\x22intemporal.fsm/rules\x22,-933040885),rules,new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216),init_state], null);\nvar env \x3d intemporal.workflow.current_env();\nreturn promesa.core.create.cljs$core$IFn$_invoke$arity$1((function (resolve_fn_57324,reject_fn_57323){\nvar loop_fn_57320 \x3d (function intemporal$automata$run_fsm_workflow__$_loop_fn_57320(state,evt){\nreturn promesa.core.fnly.cljs$core$IFn$_invoke$arity$2((function (res_57321,err_57322){\nif((!((err_57322 \x3d\x3d null)))){\nreturn (reject_fn_57323.cljs$core$IFn$_invoke$arity$1 ? reject_fn_57323.cljs$core$IFn$_invoke$arity$1(err_57322) : reject_fn_57323.call(null,err_57322));\n} else {\nif(promesa.core.recur_QMARK_(res_57321)){\npromesa.exec.run_BANG_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\x22vthread\x22,\x22vthread\x22,441141075),promesa.exec.wrap_bindings((function (){\nreturn cljs.core.apply.cljs$core$IFn$_invoke$arity$2(intemporal$automata$run_fsm_workflow__$_loop_fn_57320,new cljs.core.Keyword(null,\x22bindings\x22,\x22bindings\x22,1271397192).cljs$core$IFn$_invoke$arity$1(res_57321));\n})));\n\nreturn null;\n} else {\nreturn (resolve_fn_57324.cljs$core$IFn$_invoke$arity$1 ? resolve_fn_57324.cljs$core$IFn$_invoke$arity$1(res_57321) : resolve_fn_57324.call(null,res_57321));\n}\n}\n}),promesa.protocols._mcat(promesa.protocols._promise(null),(function (___49992__auto__){\nreturn promesa.protocols._mcat(promesa.protocols._promise(state),(function (state__$1){\nreturn promesa.protocols._mcat(promesa.protocols._promise(evt),(function (evt__$1){\nreturn promesa.protocols._promise((cljs.core.truth_(evt__$1)?promesa.core.__GT_Recur(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [intemporal.fsm.transit.cljs$core$IFn$_invoke$arity$2(state__$1,evt__$1),(function (){var _STAR_env_STAR__orig_val__57327 \x3d intemporal.workflow.internal._STAR_env_STAR_;\nvar _STAR_env_STAR__temp_val__57328 \x3d cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([intemporal.workflow.internal.default_env,env], 0));\n(intemporal.workflow.internal._STAR_env_STAR_ \x3d _STAR_env_STAR__temp_val__57328);\n\ntry{return stub(evt__$1);\n}finally {(intemporal.workflow.internal._STAR_env_STAR_ \x3d _STAR_env_STAR__orig_val__57327);\n}})()], null)):new cljs.core.Keyword(\x22intemporal.fsm\x22,\x22state\x22,\x22intemporal.fsm/state\x22,143854216).cljs$core$IFn$_invoke$arity$1(state__$1)));\n}));\n}));\n})));\n});\nreturn promesa.exec.run_BANG_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\x22vthread\x22,\x22vthread\x22,441141075),promesa.exec.wrap_bindings((function (){\nreturn loop_fn_57320(initstate,init_event);\n})));\n}));\n});\n\nintemporal.automata.run_fsm_workflow \x3d (function intemporal$automata$run_fsm_workflow(rules,init_state,init_event){\nvar ref__56946__auto__ \x3d new cljs.core.Keyword(null,\x22ref\x22,\x22ref\x22,1289896967).cljs$core$IFn$_invoke$arity$1(intemporal.workflow.internal._STAR_env_STAR_);\nvar root__56947__auto__ \x3d new cljs.core.Keyword(null,\x22root\x22,\x22root\x22,-448657453).cljs$core$IFn$_invoke$arity$1(intemporal.workflow.internal._STAR_env_STAR_);\nvar id__56948__auto__ \x3d (function (){var or__5025__auto__ \x3d new cljs.core.Keyword(null,\x22id\x22,\x22id\x22,-1388402092).cljs$core$IFn$_invoke$arity$1(intemporal.workflow.internal._STAR_env_STAR_);\nif(cljs.core.truth_(or__5025__auto__)){\nreturn or__5025__auto__;\n} else {\nreturn intemporal.workflow.internal.random_id();\n}\n})();\nvar fvar__56949__auto__ \x3d new cljs.core.Var(function(){return intemporal.automata.run_fsm_workflow_;},new cljs.core.Symbol(\x22intemporal.automata\x22,\x22run-fsm-workflow-\x22,\x22intemporal.automata/run-fsm-workflow-\x22,-1960876937,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,\x22private\x22,\x22private\x22,-558947994),new cljs.core.Keyword(null,\x22ns\x22,\x22ns\x22,441598760),new cljs.core.Keyword(null,\x22name\x22,\x22name\x22,1843675177),new cljs.core.Keyword(null,\x22file\x22,\x22file\x22,-1269645878),new cljs.core.Keyword(null,\x22column\x22,\x22column\x22,2078222095),new cljs.core.Keyword(null,\x22line\x22,\x22line\x22,212345235),new cljs.core.Keyword(null,\x22arglists\x22,\x22arglists\x22,1661989754),new cljs.core.Keyword(null,\x22doc\x22,\x22doc\x22,1913296891),new cljs.core.Keyword(null,\x22test\x22,\x22test\x22,577538877)],[true,new cljs.core.Symbol(null,\x22intemporal.automata\x22,\x22intemporal.automata\x22,1148200861,null),new cljs.core.Symbol(null,\x22run-fsm-workflow-\x22,\x22run-fsm-workflow-\x22,-808887186,null),\x22intemporal/automata.cljs\x22,1,46,cljs.core.list(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22rules\x22,\x22rules\x22,-1455523403,null),new cljs.core.Symbol(null,\x22init-state\x22,\x22init-state\x22,-1203572557,null),new cljs.core.Symbol(null,\x22init-event\x22,\x22init-event\x22,-424164889,null)], null)),null,(cljs.core.truth_(intemporal.automata.run_fsm_workflow_)?intemporal.automata.run_fsm_workflow_.cljs$lang$test:null)]));\nvar task__56950__auto__ \x3d intemporal.workflow.internal.create_workflow_task.cljs$core$IFn$_invoke$arity$6(ref__56946__auto__,root__56947__auto__,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(fvar__56949__auto__),fvar__56949__auto__,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [rules,init_state,init_event], null),id__56948__auto__);\n(function (){\nvar __run_fn_form \x3d null;\nvar __kind \x3d new cljs.core.Keyword(null,\x22log\x22,\x22log\x22,-1595516004);\nvar __ns \x3d \x22intemporal.automata\x22;\nvar __id \x3d null;\nvar __level \x3d new cljs.core.Keyword(null,\x22debug\x22,\x22debug\x22,-1608172596);\nif(cljs.core.truth_((function (){var sf \x3d taoensso.telemere.impl._STAR_rt_call_filter_STAR_;\nif(cljs.core.truth_(sf)){\nreturn (sf.cljs$core$IFn$_invoke$arity$4 ? sf.cljs$core$IFn$_invoke$arity$4(new cljs.core.Keyword(null,\x22log\x22,\x22log\x22,-1595516004),__ns,__id,__level) : sf.call(null,new cljs.core.Keyword(null,\x22log\x22,\x22log\x22,-1595516004),__ns,__id,__level));\n} else {\nreturn true;\n}\n})())){\nvar __inst \x3d (new Date());\nvar __thread \x3d null;\nvar __root0 \x3d taoensso.telemere.impl._STAR_trace_root_STAR_;\nvar __otel_context1 \x3d null;\nvar __uid \x3d null;\nvar __root1 \x3d __root0;\nvar __run_result \x3d null;\nvar signal__52369__auto__ \x3d (new cljs.core.Delay((function (){\n\nvar signal__52360__auto__ \x3d (function (){var signal__52359__auto__ \x3d (new taoensso.telemere.impl.Signal((1),__inst,__uid,__ns,null,null,__kind,__id,__level,taoensso.telemere._STAR_ctx_STAR_,taoensso.telemere.impl._STAR_trace_parent_STAR_,__root1,null,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22_data\x22,\x22_data\x22,-1394265439),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22task\x22,\x22task\x22,-1476607993),task__56950__auto__,new cljs.core.Keyword(null,\x22env\x22,\x22env\x22,-1815813235),intemporal.workflow.internal._STAR_env_STAR_], null)], null),(new cljs.core.Delay((function (){\nreturn taoensso.telemere.impl.signal_msg(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [\x22Invoking task with id\x22,new cljs.core.Keyword(null,\x22id\x22,\x22id\x22,-1388402092).cljs$core$IFn$_invoke$arity$1(task__56950__auto__)], null));\n}),null)),null,null,null,null,null,null,null,null));\nreturn cljs.core.reduce_kv(cljs.core.assoc,signal__52359__auto__,signal__52359__auto__.kvs);\n})();\nvar temp__5823__auto__ \x3d taoensso.telemere._STAR_xfn_STAR_;\nif(cljs.core.truth_(temp__5823__auto__)){\nvar xfn__52361__auto__ \x3d temp__5823__auto__;\nreturn (xfn__52361__auto__.cljs$core$IFn$_invoke$arity$1 ? xfn__52361__auto__.cljs$core$IFn$_invoke$arity$1(signal__52360__auto__) : xfn__52361__auto__.call(null,signal__52360__auto__));\n} else {\nreturn signal__52360__auto__;\n}\n}),null));\ntaoensso.telemere.impl.dispatch_signal_BANG_((new taoensso.telemere.impl.WrappedSignal(__kind,__ns,__id,__level,signal__52369__auto__)));\n\nif(cljs.core.truth_(__run_result)){\nreturn (__run_result.cljs$core$IFn$_invoke$arity$1 ? __run_result.cljs$core$IFn$_invoke$arity$1(signal__52369__auto__) : __run_result.call(null,signal__52369__auto__));\n} else {\nreturn true;\n}\n} else {\nreturn null;\n}\n})();\n\n\nreturn intemporal.workflow.enqueue_and_wait(intemporal.workflow.internal._STAR_env_STAR_,task__56950__auto__);\n});\nintemporal.automata.set_html_BANG_ \x3d (function intemporal$automata$set_html_BANG_(id,html){\nreturn (document.getElementById(id).innerHTML \x3d html);\n});\nintemporal.automata.set_results_BANG_ \x3d (function intemporal$automata$set_results_BANG_(html){\nreturn intemporal.automata.set_html_BANG_(\x22results\x22,html);\n});\nintemporal.automata.render_table_BANG_ \x3d (function intemporal$automata$render_table_BANG_(id,rows){\nvar header \x3d cljs.core.keys(cljs.core.first(rows));\nvar thead \x3d new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22thead\x22,\x22thead\x22,-291875296),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22tr\x22,\x22tr\x22,-1424774646),(function (){var iter__5503__auto__ \x3d (function intemporal$automata$render_table_BANG__$_iter__57333(s__57334){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__57334__$1 \x3d s__57334;\nwhile(true){\nvar temp__5825__auto__ \x3d cljs.core.seq(s__57334__$1);\nif(temp__5825__auto__){\nvar s__57334__$2 \x3d temp__5825__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__57334__$2)){\nvar c__5501__auto__ \x3d cljs.core.chunk_first(s__57334__$2);\nvar size__5502__auto__ \x3d cljs.core.count(c__5501__auto__);\nvar b__57336 \x3d cljs.core.chunk_buffer(size__5502__auto__);\nif((function (){var i__57335 \x3d (0);\nwhile(true){\nif((i__57335 \x3c size__5502__auto__)){\nvar h \x3d cljs.core._nth(c__5501__auto__,i__57335);\ncljs.core.chunk_append(b__57336,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22td\x22,\x22td\x22,1479933353),h], null));\n\nvar G__57387 \x3d (i__57335 + (1));\ni__57335 \x3d G__57387;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__57336),intemporal$automata$render_table_BANG__$_iter__57333(cljs.core.chunk_rest(s__57334__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__57336),null);\n}\n} else {\nvar h \x3d cljs.core.first(s__57334__$2);\nreturn cljs.core.cons(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22td\x22,\x22td\x22,1479933353),h], null),intemporal$automata$render_table_BANG__$_iter__57333(cljs.core.rest(s__57334__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__5503__auto__(header);\n})()], null)], null);\nvar tbody \x3d new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22tbody\x22,\x22tbody\x22,-80678300),(function (){var iter__5503__auto__ \x3d (function intemporal$automata$render_table_BANG__$_iter__57341(s__57342){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__57342__$1 \x3d s__57342;\nwhile(true){\nvar temp__5825__auto__ \x3d cljs.core.seq(s__57342__$1);\nif(temp__5825__auto__){\nvar s__57342__$2 \x3d temp__5825__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__57342__$2)){\nvar c__5501__auto__ \x3d cljs.core.chunk_first(s__57342__$2);\nvar size__5502__auto__ \x3d cljs.core.count(c__5501__auto__);\nvar b__57344 \x3d cljs.core.chunk_buffer(size__5502__auto__);\nif((function (){var i__57343 \x3d (0);\nwhile(true){\nif((i__57343 \x3c size__5502__auto__)){\nvar r \x3d cljs.core._nth(c__5501__auto__,i__57343);\ncljs.core.chunk_append(b__57344,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22tr\x22,\x22tr\x22,-1424774646),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22class\x22,\x22class\x22,-2030961996),cljs.core.name(cljs.core.get.cljs$core$IFn$_invoke$arity$2(r,new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348)))], null),(function (){var iter__5503__auto__ \x3d ((function (i__57343,r,c__5501__auto__,size__5502__auto__,b__57344,s__57342__$2,temp__5825__auto__,header,thead){\nreturn (function intemporal$automata$render_table_BANG__$_iter__57341_$_iter__57353(s__57354){\nreturn (new cljs.core.LazySeq(null,((function (i__57343,r,c__5501__auto__,size__5502__auto__,b__57344,s__57342__$2,temp__5825__auto__,header,thead){\nreturn (function (){\nvar s__57354__$1 \x3d s__57354;\nwhile(true){\nvar temp__5825__auto____$1 \x3d cljs.core.seq(s__57354__$1);\nif(temp__5825__auto____$1){\nvar s__57354__$2 \x3d temp__5825__auto____$1;\nif(cljs.core.chunked_seq_QMARK_(s__57354__$2)){\nvar c__5501__auto____$1 \x3d cljs.core.chunk_first(s__57354__$2);\nvar size__5502__auto____$1 \x3d cljs.core.count(c__5501__auto____$1);\nvar b__57356 \x3d cljs.core.chunk_buffer(size__5502__auto____$1);\nif((function (){var i__57355 \x3d (0);\nwhile(true){\nif((i__57355 \x3c size__5502__auto____$1)){\nvar h \x3d cljs.core._nth(c__5501__auto____$1,i__57355);\ncljs.core.chunk_append(b__57356,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22td\x22,\x22td\x22,1479933353),cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.get.cljs$core$IFn$_invoke$arity$2(r,h)], 0))], null));\n\nvar G__57388 \x3d (i__57355 + (1));\ni__57355 \x3d G__57388;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__57356),intemporal$automata$render_table_BANG__$_iter__57341_$_iter__57353(cljs.core.chunk_rest(s__57354__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__57356),null);\n}\n} else {\nvar h \x3d cljs.core.first(s__57354__$2);\nreturn cljs.core.cons(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22td\x22,\x22td\x22,1479933353),cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.get.cljs$core$IFn$_invoke$arity$2(r,h)], 0))], null),intemporal$automata$render_table_BANG__$_iter__57341_$_iter__57353(cljs.core.rest(s__57354__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n});})(i__57343,r,c__5501__auto__,size__5502__auto__,b__57344,s__57342__$2,temp__5825__auto__,header,thead))\n,null,null));\n});})(i__57343,r,c__5501__auto__,size__5502__auto__,b__57344,s__57342__$2,temp__5825__auto__,header,thead))\n;\nreturn iter__5503__auto__(header);\n})()], null));\n\nvar G__57389 \x3d (i__57343 + (1));\ni__57343 \x3d G__57389;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__57344),intemporal$automata$render_table_BANG__$_iter__57341(cljs.core.chunk_rest(s__57342__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__57344),null);\n}\n} else {\nvar r \x3d cljs.core.first(s__57342__$2);\nreturn cljs.core.cons(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22tr\x22,\x22tr\x22,-1424774646),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22class\x22,\x22class\x22,-2030961996),cljs.core.name(cljs.core.get.cljs$core$IFn$_invoke$arity$2(r,new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348)))], null),(function (){var iter__5503__auto__ \x3d ((function (r,s__57342__$2,temp__5825__auto__,header,thead){\nreturn (function intemporal$automata$render_table_BANG__$_iter__57341_$_iter__57361(s__57362){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__57362__$1 \x3d s__57362;\nwhile(true){\nvar temp__5825__auto____$1 \x3d cljs.core.seq(s__57362__$1);\nif(temp__5825__auto____$1){\nvar s__57362__$2 \x3d temp__5825__auto____$1;\nif(cljs.core.chunked_seq_QMARK_(s__57362__$2)){\nvar c__5501__auto__ \x3d cljs.core.chunk_first(s__57362__$2);\nvar size__5502__auto__ \x3d cljs.core.count(c__5501__auto__);\nvar b__57364 \x3d cljs.core.chunk_buffer(size__5502__auto__);\nif((function (){var i__57363 \x3d (0);\nwhile(true){\nif((i__57363 \x3c size__5502__auto__)){\nvar h \x3d cljs.core._nth(c__5501__auto__,i__57363);\ncljs.core.chunk_append(b__57364,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22td\x22,\x22td\x22,1479933353),cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.get.cljs$core$IFn$_invoke$arity$2(r,h)], 0))], null));\n\nvar G__57390 \x3d (i__57363 + (1));\ni__57363 \x3d G__57390;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__57364),intemporal$automata$render_table_BANG__$_iter__57341_$_iter__57361(cljs.core.chunk_rest(s__57362__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__57364),null);\n}\n} else {\nvar h \x3d cljs.core.first(s__57362__$2);\nreturn cljs.core.cons(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\x22td\x22,\x22td\x22,1479933353),cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.get.cljs$core$IFn$_invoke$arity$2(r,h)], 0))], null),intemporal$automata$render_table_BANG__$_iter__57341_$_iter__57361(cljs.core.rest(s__57362__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});})(r,s__57342__$2,temp__5825__auto__,header,thead))\n;\nreturn iter__5503__auto__(header);\n})()], null),intemporal$automata$render_table_BANG__$_iter__57341(cljs.core.rest(s__57342__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__5503__auto__(rows);\n})()], null);\nvar tbl \x3d [\x22\x3ctable\x22,\x22 role\x3d\\\x22grid\\\x22\x22,\x22\x3e\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1(hiccups.runtime.render_html(thead)),cljs.core.str.cljs$core$IFn$_invoke$arity$1(hiccups.runtime.render_html(tbody)),\x22\x3c/table\x3e\x22].join(\x27\x27);\nreturn intemporal.automata.set_html_BANG_(id,tbl);\n});\nintemporal.automata.render_tables_BANG_ \x3d (function intemporal$automata$render_tables_BANG_(the_store){\nvar tasks \x3d intemporal.store.list_tasks(the_store);\nvar events \x3d cljs.core.sort_by.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\x22id\x22,\x22id\x22,-1388402092),intemporal.store.list_events(the_store));\nintemporal.automata.render_table_BANG_(\x22tasks\x22,tasks);\n\nintemporal.automata.render_table_BANG_(\x22events\x22,events);\n\nconsole.table(cljs.core.clj__GT_js(tasks));\n\nreturn console.table(cljs.core.clj__GT_js(events));\n});\nintemporal.automata.init \x3d (function intemporal$automata$init(){\nvar mstore \x3d intemporal.store.make_store.cljs$core$IFn$_invoke$arity$0();\nvar stop \x3d intemporal.workflow.start_worker_BANG_.cljs$core$IFn$_invoke$arity$1(mstore);\nvar res \x3d (function (){var _STAR_env_STAR__orig_val__57370 \x3d intemporal.workflow.internal._STAR_env_STAR_;\nvar _STAR_env_STAR__temp_val__57371 \x3d cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([intemporal.workflow.internal.default_env,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22store\x22,\x22store\x22,1512230022),mstore], null)], 0));\n(intemporal.workflow.internal._STAR_env_STAR_ \x3d _STAR_env_STAR__temp_val__57371);\n\ntry{return intemporal.automata.run_fsm_workflow(intemporal.automata.resource_rules,new cljs.core.Keyword(\x22state\x22,\x22init\x22,\x22state/init\x22,-2036161781),new cljs.core.Keyword(\x22event\x22,\x22create\x22,\x22event/create\x22,-1323031250));\n}finally {(intemporal.workflow.internal._STAR_env_STAR_ \x3d _STAR_env_STAR__orig_val__57370);\n}})();\nreturn promesa.core.finally$.cljs$core$IFn$_invoke$arity$2(promesa.core.catch$.cljs$core$IFn$_invoke$arity$2(promesa.core.then.cljs$core$IFn$_invoke$arity$2(res,(function (r){\nconsole.log(\x22res\x22,r);\n\nintemporal.automata.set_results_BANG_(cljs.core.prn_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([r], 0)));\n\nreturn intemporal.automata.render_tables_BANG_(mstore);\n})),(function (r){\nconsole.error(\x22error\x22,r);\n\nreturn intemporal.automata.set_results_BANG_(cljs.core.prn_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([r], 0)));\n})),stop);\n});\n");
SHADOW_ENV.evalLoad("shadow.module.automata.append.js", false, "\nshadow.cljs.devtools.client.env.module_loaded(\x27automata\x27);\n\ntry { intemporal.automata.init(); } catch (e) { console.error(\x22An error occurred when calling (intemporal.automata/init)\x22); console.error(e); };\nSHADOW_ENV.setLoaded(\x22intemporal.fsm.js\x22);\nSHADOW_ENV.setLoaded(\x22intemporal.automata.js\x22);\nSHADOW_ENV.setLoaded(\x22shadow.module.automata.append.js\x22);");